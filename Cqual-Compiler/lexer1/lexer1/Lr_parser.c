#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "stack.h"
#include "Lexer.h"
#include "main.h"
#define ROWS 80
#define COLS 27

// Structure to hold the matrix data
typedef struct {
    char type[4]; // 'r' for strings starting with 'r', 's' for strings starting with 's', 'i' for integers

} MatrixCell;
typedef struct {
    int row;
    int col;
    char data[4];
}insert;
typedef struct {
    const char* non_terminal;
    int reduction_number;
} ReductionRule;
MatrixCell matrix[ROWS][COLS];
int goto_table[ROWS][17] = {
        { 0,  1,  8,  0,  0,  2,  5, 15, 19, 14,  0,  4,  6,  7,  9,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0, 20,  8,  0,  0,  2,  5, 15, 19, 14,  0,  4,  6,  7,  9,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0, 23, 19, 24, 22,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0, 32, 19, 24,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0, 35, 19, 24,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 43,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 23, 19, 24, 45,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0,  0, 47, 24,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0,  0, 48, 24,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0,  0,  0, 50,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0,  0,  0, 51,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,},
{ 0,  0,  0,  0, 53,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 55, 19, 24,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 56, 19, 24,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 57, 19, 24,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 58, 19, 24,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 59, 19, 24,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0,  0,  0,  0, 60, 19, 24,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0, 63,  0,  0,  0, 64, 19, 24,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0, 67,  8,  0,  0,  2,  5, 15, 19, 14,  0,  4,  6,  7,  9,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0, 23, 19, 24, 68,  0,  0,  0,  0,  0},
{ 0,  0,  0,  0, 69,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0, 72,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0, 75,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
{ 0,  0,  0, 76,  0,  0,  0, 64, 19, 24,  0,  0,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 77,  0,  0,  0,  0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{ 0,  0,  0,  0, 79,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0}
};

ReductionRule reduction_rules[] = {
    {"S'", 1},
    {"S'", 0},
    {"statement_list", 2},
    {"statement_list", 0},
    {"function", 4},
    {"parameters", 3},
    {"parameters", 0},
    {"block", 1},
    {"statement", 1},
    {"statement", 1},
    {"statement", 1},
    {"statement", 1},
    {"statement", 1},
    {"statement", 1},
    {"if_statement", 4},
    {"if_statement", 7},
    {"else_part", 1},
    {"else_part", 0},
    {"expression", 3},
    {"expression", 3},
    {"expression", 1},
    {"term", 3},
    {"term", 3},
    {"term", 1},
    {"factor", 1},
    {"factor", 1},
    {"factor", 1},
    {"factor_base", 1},
    {"factor_base", 1},
    {"factor_base", 1},
    {"condition", 3},
    {"condition", 3},
    {"condition", 3},
    {"condition", 3},
    {"condition", 3},
    {"condition", 3},
    {"assignment", 3},
    {"for_statement", 9},
    {"while_statement", 2},
    {"expression_statement", 2}
};
int pos_terminal(char* str) {
    static char* terminals_ordered[] = {
        "ε", "ID", "(", ")", ",", "{", "}", "IF", "THEN", "ELSE",
            "+", "-", "*", "/", "number", "string", "!=", ">", "<",
            ">=", "<=", "==", "=", ";", "FOR", "WHILE", "$"
    };
    for (int i = 0; i < sizeof(terminals_ordered) / sizeof(terminals_ordered[0]); i++)
    {
        if (strcmp(str, terminals_ordered[i]) == 0)
            return i;
    }
    return -1;
}
int pos_nonterminal(char* str) {
    static const char* non_terminals[] = {
        "S'",
        "statement_list",
        "function",
        "parameters",
        "block",
        "statement",
        "if_statement",
        "else_part",
        "expression",
        "term",
        "factor",
        "factor_base",
        "condition",
        "assignment",
        "for_statement",
        "while_statement",
        "expression_statement"
    };
    for (int i = 0; i < sizeof(non_terminals) / sizeof(non_terminals[0]); i++)
    {
        if (strcmp(str, non_terminals[i]) == 0)
            return i;
    }
    return -1;
}
void lr_parse(char** input, int input_size) {
    stack s;
    stack_init(&s);

    int input_pos = 0;
    int current_state = 0;
    char action[] = "tttt";
    while (1) {


        char* symbol = (input_pos < input_size) ? input[input_pos] : "$";
        int size = 0;

        strcpy(action, matrix[current_state][pos_terminal(symbol)].type);

        switch (action[0]) {
        case 's':
            size = atoi((action + 1));
            stack_push(&s, symbol); // Push symbol (optional based on your implementation)
            printf("%s\n", stack_top(&s));
            stack_push(&s, (action + 1)); // Push state
            printf("%s\n", stack_top(&s));
            input_pos++;
            current_state = size;

            break;
        case 'r':
            printf("%s\n", action);
            size = atoi((action + 1));
            int temp = 2;
            for (int i = 0; i < reduction_rules[size].reduction_number; i++)
            {
                stack_pop(&s);
            }
            stack_push(&s, reduction_rules[size].non_terminal);
            printf("%s\n", stack_top(&s));
            while (pos_nonterminal(stack_top(&s)) != -1)
            {
                char temp2[100];
                size = goto_table[size][pos_nonterminal(stack_top(&s))];
                if (size) {
                    sprintf(temp2, "%d", size);
                    stack_push(&s, temp2);

                    printf("%s\n", stack_top(&s));

                    current_state = size;
                }
                else {

                    current_state = atoi((action + 1));
                }
            }


            break;
        case 'a':
            printf("Parsing successful\n");
            return;
        case 'E':
        default:
            fprintf(stderr, "Syntax error\n");
            return;
        }

    }
}

void init(){




    // Initialize the matrix with default values


    insert insert2[][1] = { {0,0,"s3"},
{0,1,"s10"},
{0,7,"s11"},
{0,14,"s18"},
{0,15,"s19"},
{0,24,"s12"},
{0,25,"s13"},
{1, 26,"acc"},
{2,0,"s3"},
{2,1,"s10"},
{2,7,"s11"},
{2,14,"s18"},
{2,15,"s19"},
{2,24,"s12"},
{2,25,"s13"},
{10,22,"s21"},
{11,1,"s25"},
{11,14,"s18"},
{11,15,"s19"},
{12,2,"s26"},
{13,2,"s27"},
{14,1,"s28"},
{15,10,"s30"},
{15,11,"s31"},
{15,23,"s29"},
{17,12,"s32"},
{17,13,"s33"},
{21,1,"s25"},
{21,14,"s18"},
{21,15,"s19"},
{22,8,"s35"},
{23,10,"s30"},
{23,11,"s31"},
{23,16,"s36"},
{23,17,"s37"},
{23,18,"s38"},
{23,19,"s39"},
{23,20,"s40"},
{23,21,"s41"},
{26,1,"s43"},
{27,1,"s25"},
{27,14,"s18"},
{27,15,"s19"},
{28,2,"s45"},
{30,1,"s25"},
{30,14,"s18"},
{30,15,"s19"},
{31,1,"s25"},
{31,14,"s18"},
{31,15,"s19"},
{32,1,"s25"},
{32,14,"s18"},
{32,15,"s19"},
{33,1,"s25"},
{33,14,"s18"},
{33,15,"s19"},
{34,10,"s30"},
{34,11,"s31"},
{34,23,"s51"},
{35,1,"s10"},
{35,5,"s54"},
{35,7,"s11"},
{35,14,"s18"},
{35,15,"s19"},
{35,24,"s12"},
{35,25,"s13"},
{36,1,"s25"},
{36,14,"s18"},
{36,15,"s19"},
{37,1,"s25"},
{37,14,"s18"},
{37,15,"s19"},
{38,1,"s25"},
{38,14,"s18"},
{38,15,"s19"},
{39,1,"s25"},
{39,14,"s18"},
{39,15,"s19"},
{40,1,"s25"},
{40,14,"s18"},
{40,15,"s19"},
{41,1,"s25"},
{41,14,"s18"},
{41,15,"s19"},
{42,23,"s61"},
{43,22,"s21"},
{44,3,"s62"},
{45,0,"s65"},
{45,1,"s25"},
{45,14,"s18"},
{45,15,"s19"},
{46,12,"s32"},
{46,13,"s33"},
{47,10,"s30"},
{47,11,"s31"},
{48,12,"s32"},
{48,13,"s33"},
{53,9,"s66"},
{54,0,"s3"},
{54,1,"s10"},
{54,7,"s11"},
{54,14,"s18"},
{54,15,"s19"},
{54,24,"s12"},
{54,25,"s13"},
{55,10,"s30"},
{55,11,"s31"},
{56,10,"s30"},
{56,11,"s31"},
{57,10,"s30"},
{57,11,"s31"},
{58,10,"s30"},
{58,11,"s31"},
{59,10,"s30"},
{59,11,"s31"},
{60,10,"s30"},
{60,11,"s31"},
{61,1,"s25"},
{61,14,"s18"},
{61,15,"s19"},
{62,5,"s54"},
{63,3,"s70"},
{64,4,"s71"},
{64,10,"s30"},
{64,11,"s31"},
{66,5,"s54"},
{67,6,"s73"},
{68,23,"s74"},
{70,5,"s54"},
{71,1,"s25"},
{71,14,"s18"},
{71,15,"s19"},
{74,1,"s43"},
{76,10,"s30"},
{76,11,"s31"},
{77,3,"s78"},
{78,5,"s54"} };
    insert insert3[][1] = {
   {3,6,"r3"},
   {3,26,"r3"},
   {4,0,"r8"},
   {4,1,"r8"},
   {4,7,"r8"},
   {4,14,"r8"},
   {4,15,"r8"},
   {4,24,"r8"},
   {4,25,"r8"},
   {5,0,"r9"},
   {5,1,"r9"},
   {5,7,"r9"},
   {5,14,"r9"},
   {5,15,"r9"},
   {5,24,"r9"},
   {5,25,"r9"},
   {6,0,"r10"},
   {6,1,"r10"},
   {6,7,"r10"},
   {6,14,"r10"},
   {6,15,"r10"},
   {6,24,"r10"},
   {6,25,"r10"},
   {7,0,"r11"},
   {7,1,"r11"},
   {7,7,"r11"},
   {7,14,"r11"},
   {7,15,"r11"},
   {7,24,"r11"},
   {7,25,"r11"},
   {8,0,"r12"},
   {8,1,"r12"},
   {8,7,"r12"},
   {8,14,"r12"},
   {8,15,"r12"},
   {8,24,"r12"},
   {8,25,"r12"},
   {9,0,"r13"},
   {9,1,"r13"},
   {9,7,"r13"},
   {9,14,"r13"},
   {9,15,"r13"},
   {9,24,"r13"},
   {9,25,"r13"},
   {10,1,"r25"},
   {10,10,"r25"},
   {10,11,"r25"},
   {10,12,"r25"},
   {10,13,"r25"},
   {10,23,"r25"},
   {14,10,"r23"},
   {14,11,"r23"},
   {14,12,"r23"},
   {14,13,"r23"},
   {14,23,"r23"},
   {15,1,"r26"},
   {15,12,"r26"},
   {15,13,"r26"},
   {16,1,"r24"},
   {16,3,"r24"},
   {16,4,"r24"},
   {16,8,"r24"},
   {16,10,"r24"},
   {16,11,"r24"},
   {16,12,"r24"},
   {16,13,"r24"},
   {16,16,"r24"},
   {16,17,"r24"},
   {16,18,"r24"},
   {16,19,"r24"},
   {16,20,"r24"},
   {16,21,"r24"},
   {16,23,"r24"},
   {17,1,"r20"},
   {17,3,"r20"},
   {17,4,"r20"},
   {17,8,"r20"},
   {17,10,"r20"},
   {17,11,"r20"},
   {17,16,"r20"},
   {17,17,"r20"},
   {17,18,"r20"},
   {17,19,"r20"},
   {17,20,"r20"},
   {17,21,"r20"},
   {17,23,"r20"},
   {18,1,"r27"},
   {18,3,"r27"},
   {18,4,"r27"},
   {18,8,"r27"},
   {18,10,"r27"},
   {18,11,"r27"},
   {18,12,"r27"},
   {18,13,"r27"},
   {18,16,"r27"},
   {18,17,"r27"},
   {18,18,"r27"},
   {18,19,"r27"},
   {18,20,"r27"},
   {18,21,"r27"},
   {18,23,"r27"},
   {19,1,"r29"},
   {19,3,"r29"},
   {19,4,"r29"},
   {19,8,"r29"},
   {19,10,"r29"},
   {19,11,"r29"},
   {19,12,"r29"},
   {19,13,"r29"},
   {19,16,"r29"},
   {19,17,"r29"},
   {19,18,"r29"},
   {19,19,"r29"},
   {19,20,"r29"},
   {19,21,"r29"},
   {19,23,"r29"},
   {20,6,"r2"},
   {20,26,"r2"},
   {23,12,"r26"},
   {23,13,"r26"},
   {24,1,"r23"},
   {24,3,"r23"},
   {24,4,"r23"},
   {24,8,"r23"},
   {24,10,"r23"},
   {24,11,"r23"},
   {24,12,"r23"},
   {24,13,"r23"},
   {24,16,"r23"},
   {24,17,"r23"},
   {24,18,"r23"},
   {24,19,"r23"},
   {24,20,"r23"},
   {24,21,"r23"},
   {24,23,"r23"},
   {25,1,"r25"},
   {25,3,"r25"},
   {25,4,"r25"},
   {25,8,"r25"},
   {25,10,"r25"},
   {25,11,"r25"},
   {25,12,"r25"},
   {25,13,"r25"},
   {25,16,"r25"},
   {25,17,"r25"},
   {25,18,"r25"},
   {25,19,"r25"},
   {25,20,"r25"},
   {25,21,"r25"},
   {25,23,"r25"},
   {29,0,"r39"},
   {29,1,"r39"},
   {29,7,"r39"},
   {29,14,"r39"},
   {29,15,"r39"},
   {29,24,"r39"},
   {29,25,"r39"},
   {34,12,"r26"},
   {34,13,"r26"},
   {46,1,"r18"},
   {46,3,"r18"},
   {46,4,"r18"},
   {46,8,"r18"},
   {46,10,"r18"},
   {46,11,"r18"},
   {46,16,"r18"},
   {46,17,"r18"},
   {46,18,"r18"},
   {46,19,"r18"},
   {46,20,"r18"},
   {46,21,"r18"},
   {46,23,"r18"},
   {47,1,"r26"},
   {47,3,"r26"},
   {47,4,"r26"},
   {47,8,"r26"},
   {47,12,"r26"},
   {47,13,"r26"},
   {47,16,"r26"},
   {47,17,"r26"},
   {47,18,"r26"},
   {47,19,"r26"},
   {47,20,"r26"},
   {47,21,"r26"},
   {47,23,"r26"},
   {48,1,"r19"},
   {48,3,"r19"},
   {48,4,"r19"},
   {48,8,"r19"},
   {48,10,"r19"},
   {48,11,"r19"},
   {48,16,"r19"},
   {48,17,"r19"},
   {48,18,"r19"},
   {48,19,"r19"},
   {48,20,"r19"},
   {48,21,"r19"},
   {48,23,"r19"},
   {49,1,"r21"},
   {49,3,"r21"},
   {49,4,"r21"},
   {49,8,"r21"},
   {49,10,"r21"},
   {49,11,"r21"},
   {49,12,"r21"},
   {49,13,"r21"},
   {49,16,"r21"},
   {49,17,"r21"},
   {49,18,"r21"},
   {49,19,"r21"},
   {49,20,"r21"},
   {49,21,"r21"},
   {49,23,"r21"},
   {50,1,"r22"},
   {50,3,"r22"},
   {50, 4, "r22"},
   { 50,8,"r22" },
   { 50,10,"r22" },
   { 50,11,"r22" },
   { 50,12,"r22" },
   { 50,13,"r22" },
   { 50,16,"r22" },
   { 50,17,"r22" },
   { 50,18,"r22" },
   { 50,19,"r22" },
   { 50,20,"r22" },
   { 50,21,"r22" },
   { 50,23,"r22" },
   { 51,0,"r36" },
   { 51,1,"r36" },
   { 51,3,"r36" },
   { 51,7,"r36" },
   { 51,14,"r36" },
   { 51,15,"r36" },
   { 51,23,"r36" },
   { 51,24,"r36" },
   { 51,25,"r36" },
   { 52,0,"r14" },
   { 52,1,"r14" },
   { 52,7,"r14" },
   { 52,14,"r14" },
   { 52,15,"r14" },
   { 52,24,"r14" },
   { 52,25,"r14" },
   {55,3,"r30"},
   {55,8,"r30"},
   {55,12,"r26"},
   {55,13,"r26"},
   {55,23,"r30"},
   {56,3,"r31"},
   {56,8,"r31"},
   {56,12,"r26"},
   {56,13,"r26"},
   {56,23,"r31"},
   {57,3,"r32"},
   {57,8,"r32"},
   {57,12,"r26"},
   {57,13,"r26"},
   {57,23,"r32"},
   {58,3,"r33"},
   {58,8,"r33"},
   {58,12,"r26"},
   {58,13,"r26"},
   {58,23,"r33"},
   {59,3,"r34"},
   {59,8,"r34"},
   {59,12,"r26"},
   {59,13,"r26"},
   {59,23,"r34"},
   {60,3,"r35"},
   {60,8,"r35"},
   {60,12,"r26"},
   {60,13,"r26"},
   {60,23,"r35"},
   {64,12,"r26"},
   {64,13,"r26"},
   {65,3,"r6"},
   {69,0,"r38"},
   {69,1,"r38"},
   {69,7,"r38"},
   {69,14,"r38"},
   {69,15,"r38"},
   {69,24,"r38"},
   {69,25,"r38"},
   {72,0,"r15"},
   {72,1,"r15"},
   {72,7,"r15"},
   {72,14,"r15"},
   {72,15,"r15"},
   {72,24,"r15"},
   {72,25,"r15"},
   {73,0,"r7"},
   {73,1,"r7"},
   {73,7,"r7"},
   {73,9,"r7"},
   {73,14,"r7"},
   {73,15,"r7"},
   {73,24,"r7"},
   {73,25,"r7"},
   {75,0,"r4"},
   {75,1,"r4"},
   {75,7,"r4"},
   {75,14,"r4"},
   {75,15,"r4"},
   {75,24,"r4"},
   {75,25,"r4"},
   {76,3,"r5"},
   {76,12,"r26"},
   {76,13,"r26"},
   {79,0,"r37"},
   {79,1,"r37"},
   {79,7,"r37"},
   {79,14,"r37"},
   {79,15,"r37"},
   {79,24,"r37"},
   {79,25,"r37"} };

    goto_table[0][1] = 1;
    goto_table[0][2] = 8;
    goto_table[0][5] = 2;
    goto_table[0][6] = 5;
    goto_table[0][8] = 15;
    goto_table[0][9] = 17;
    goto_table[0][10] = 14;
    goto_table[0][11] = 16;
    goto_table[0][13] = 4;
    goto_table[0][14] = 6;
    goto_table[0][15] = 7;
    goto_table[0][16] = 9;
    goto_table[2][1] = 20;
    goto_table[2][2] = 8;
    goto_table[2][5] = 2;
    goto_table[2][6] = 5;
    goto_table[2][8] = 15;
    goto_table[2][9] = 17;
    goto_table[2][10] = 14;
    goto_table[2][11] = 16;
    goto_table[2][13] = 4;
    goto_table[2][14] = 6;
    goto_table[2][15] = 7;
    goto_table[2][16] = 9;
    goto_table[11][8] = 23;
    goto_table[11][9] = 17;
    goto_table[11][10] = 24;
    goto_table[11][11] = 16;
    goto_table[11][12] = 22;
    goto_table[21][8] = 34;
    goto_table[21][9] = 17;
    goto_table[21][10] = 24;
    goto_table[21][11] = 16;
    goto_table[26][13] = 42;
    goto_table[27][8] = 23;
    goto_table[27][9] = 17;
    goto_table[27][10] = 24;
    goto_table[27][11] = 16;
    goto_table[27][12] = 44;
    goto_table[30][8] = 47;
    goto_table[30][9] = 46;
    goto_table[30][10] = 24;
    goto_table[30][11] = 16;
    goto_table[31][8] = 47;
    goto_table[31][9] = 48;
    goto_table[31][10] = 24;
    goto_table[31][11] = 16;
    goto_table[32][8] = 47;
    goto_table[32][9] = 17;
    goto_table[32][10] = 49;
    goto_table[32][11] = 16;
    goto_table[33][8] = 47;
    goto_table[33][9] = 17;
    goto_table[33][10] = 50;
    goto_table[33][11] = 16;
    goto_table[35][2] = 8;
    goto_table[35][4] = 53;
    goto_table[35][5] = 52;
    goto_table[35][6] = 5;
    goto_table[35][8] = 15;
    goto_table[35][9] = 17;
    goto_table[35][10] = 14;
    goto_table[35][11] = 16;
    goto_table[35][13] = 4;
    goto_table[35][14] = 6;
    goto_table[35][15] = 7;
    goto_table[35][16] = 9;
    goto_table[36][8] = 55;
    goto_table[36][9] = 17;
    goto_table[36][10] = 24;
    goto_table[36][11] = 16;
    goto_table[37][8] = 56;
    goto_table[37][9] = 17;
    goto_table[37][10] = 24;
    goto_table[37][11] = 16;
    goto_table[38][8] = 57;
    goto_table[38][9] = 17;
    goto_table[38][10] = 24;
    goto_table[38][11] = 16;
    goto_table[39][8] = 58;
    goto_table[39][9] = 17;
    goto_table[39][10] = 24;
    goto_table[39][11] = 16;
    goto_table[40][8] = 59;
    goto_table[40][9] = 17;
    goto_table[40][10] = 24;
    goto_table[40][11] = 16;
    goto_table[41][8] = 60;
    goto_table[41][9] = 17;
    goto_table[41][10] = 24;
    goto_table[41][11] = 16;
    goto_table[45][3] = 63;
    goto_table[45][8] = 64;
    goto_table[45][9] = 17;
    goto_table[45][10] = 24;
    goto_table[45][11] = 16;
    goto_table[54][1] = 67;
    goto_table[54][2] = 8;
    goto_table[54][5] = 2;
    goto_table[54][6] = 5;
    goto_table[54][8] = 15;
    goto_table[54][9] = 17;
    goto_table[54][10] = 14;
    goto_table[54][11] = 16;
    goto_table[54][13] = 4;
    goto_table[54][14] = 6;
    goto_table[54][15] = 7;
    goto_table[54][16] = 9;
    goto_table[61][8] = 23;
    goto_table[61][9] = 17;
    goto_table[61][10] = 24;
    goto_table[61][11] = 16;
    goto_table[61][12] = 68;
    goto_table[62][4] = 69;
    goto_table[66][4] = 72;
    goto_table[70][4] = 75;
    goto_table[71][8] = 76;
    goto_table[71][9] = 17;
    goto_table[71][10] = 24;
    goto_table[71][11] = 16;
    goto_table[74][13] = 77;
    goto_table[78][4] = 79;

    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            strcpy(matrix[i][j].type, "E"); // Empty cell
        }
    }
    for (int i = 0; i < sizeof(insert2) / sizeof(insert2[0]); i++) {


        strcpy(matrix[insert2[i]->row][insert2[i]->col].type, insert2[i]->data);

    }
    for (int i = 0; i < sizeof(insert3) / sizeof(insert3[0]); i++) {


        strcpy(matrix[insert3[i]->row][insert3[i]->col].type, insert3[i]->data);

    }

    /*printf("%s", matrix[18][10].type);
    char* test_input[] = { "number","*","number",";","ε" };
    int input_size = sizeof(test_input) / sizeof(test_input[0]);
    lr_parse(test_input, input_size);*/
}

